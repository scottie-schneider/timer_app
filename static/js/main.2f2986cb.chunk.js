(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){t.exports=n(25)},20:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(12),o=n.n(r),c=n(27),s=n(28),l=(n(20),n(3)),p=n(4),m=n(6),u=n(5),h=n(7),d=n(8),f=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(m.a)(this,Object(u.a)(e).call(this,t))).state={title:n.props.title||"",project:n.props.project||""},n.handleTitleChange=function(t){n.setState({title:t.target.value})},n.handleProjectChange=function(t){n.setState({project:t.target.value})},n.handleSubmit=function(){n.props.onFormSubmit({id:n.props.id,title:n.state.title,project:n.state.project})},n.handleTitleChange=n.handleTitleChange.bind(Object(d.a)(Object(d.a)(n))),n.handleProjectChange=n.handleProjectChange.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props.id?"Update":"Create";return i.a.createElement("div",{className:"ui centered card"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"ui form"},i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Title"),i.a.createElement("input",{type:"text",value:this.state.title,onChange:this.handleTitleChange})),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Project"),i.a.createElement("input",{type:"text",value:this.state.project,onChange:this.handleProjectChange})),i.a.createElement("div",{className:"ui two bottom attached buttons"},i.a.createElement("button",{className:"ui basic blue button",onClick:this.handleSubmit},t),i.a.createElement("button",{className:"ui basic red button",onClick:this.props.onFormClose},"Cancel")))))}}]),e}(i.a.Component),b=function(t){function e(){return Object(l.a)(this,e),Object(m.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return this.props.timerIsRunning?i.a.createElement("div",{className:"ui bottom attached red basic button",onClick:this.props.onStopClick},"Stop"):i.a.createElement("div",{className:"ui bottom attached green basic button",onClick:this.props.onStartClick},"Start")}}]),e}(i.a.Component),S=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(m.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).handleStartClick=function(){n.props.onStartClick(n.props.id)},n.handleStopClick=function(){n.props.onStopClick(n.props.id)},n.handleTrashClick=function(){n.props.onTrashClick(n.props.id)},n.renderElapsedString=function(t,e){var a=t;return e&&(a+=Date.now()-e),n.millisecondsToHuman(a)},n.millisecondsToHuman=function(t){var e=Math.floor(t/1e3%60),a=Math.floor(t/1e3/60%60),i=Math.floor(t/1e3/60/60);return[n.pad(i.toString(),2),n.pad(a.toString(),2),n.pad(e.toString(),2)].join(":")},n.pad=function(t,e){for(var n=t;n.length<e;)n="0".concat(n);return n},n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.forceUpdateInterval=setInterval(function(){return t.forceUpdate()},50)}},{key:"componentWillUnmount",value:function(){clearInterval(this.forceUpdateInterval)}},{key:"render",value:function(){var t=this.renderElapsedString(this.props.elapsed,this.props.runningSince);return i.a.createElement("div",{className:"ui centered card"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"header"},this.props.title),i.a.createElement("div",{className:"meta"},this.props.project),i.a.createElement("div",{className:"center aligned description"},i.a.createElement("h2",null,t)),i.a.createElement("div",{className:"extra content"},i.a.createElement("span",{className:"right floated edit icon",onClick:this.props.onEditClick},i.a.createElement("i",{className:"edit icon"})),i.a.createElement("span",{className:"right floated trash icon",onClick:this.handleTrashClick},i.a.createElement("i",{className:"trash icon"})))),i.a.createElement(b,{timerIsRunning:!!this.props.runningSince,onStartClick:this.handleStartClick,onStopClick:this.handleStopClick}))}}]),e}(i.a.Component),j=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(m.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={editFormOpen:!1},n.handleEditClick=function(){n.openForm()},n.handleFormClose=function(){n.closeForm()},n.handleSubmit=function(t){n.props.onFormSubmit(t),n.closeForm()},n.closeForm=function(){n.setState({editFormOpen:!1})},n.openForm=function(){n.setState({editFormOpen:!0})},n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return this.state.editFormOpen?i.a.createElement(f,{id:this.props.id,title:this.props.title,project:this.props.project,onFormSubmit:this.handleSubmit,onFormClose:this.handleFormClose}):i.a.createElement(S,{id:this.props.id,title:this.props.title,project:this.props.project,elapsed:this.props.elapsed,runningSince:this.props.runningSince,onEditClick:this.handleEditClick,onTrashClick:this.props.onTrashClick,onStartClick:this.props.onStartClick,onStopClick:this.props.onStopClick})}}]),e}(i.a.Component),C=function(t){function e(){return Object(l.a)(this,e),Object(m.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this,e=this.props.timers.map(function(e){return i.a.createElement(j,{key:e.id,id:e.id,title:e.title,project:e.project,elapsed:e.elapsed,runningSince:e.runningSince,onFormSubmit:t.props.onFormSubmit,onTrashClick:t.props.onTrashClick,onStartClick:t.props.onStartClick,onStopClick:t.props.onStopClick})});return i.a.createElement("div",{id:"timers"},e)}}]),e}(i.a.Component),v=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(m.a)(this,Object(u.a)(e).call(this,t))).state={isOpen:!1},n.handleFormOpen=function(){n.setState({isOpen:!0})},n.handleFormClose=function(){n.setState({isOpen:!1})},n.handleFormSubmit=function(t){n.props.onFormSubmit(t),n.setState({isOpen:!1})},n.handleFormOpen=n.handleFormOpen.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return this.state.isOpen?i.a.createElement(f,{onFormSubmit:this.handleFormSubmit,onFormClose:this.handleFormClose}):i.a.createElement("div",{className:"ui basic content center aligned segment"},i.a.createElement("button",{className:"ui basic button icon",onClick:this.handleFormOpen},i.a.createElement("i",{className:"plus icon"})))}}]),e}(i.a.Component),k=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(m.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={timers:[]},n.loadTimersFromServer=function(){n.getTimers(function(t){return n.setState({timers:t})})},n.getTimers=function(t){return fetch("http://localhost:5000/api/timers",{headers:{Accept:"application/json"}}).then(n.checkStatus).then(n.parseJSON).then(t)},n.checkStatus=function(t){if(t.status>=200&&t.status<300)return console.log(t),t;var e=new Error("HTTP Error ".concat(t.statusText));throw e.status=t.statusText,e.response=t,console.log(e),e},n.parseJSON=function(t){return t.json()},n.newTimer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:t.title||"Timer",project:t.project||"Project",id:uuid.v4(),elapsed:0}},n.handleCreateFormSubmit=function(t){n.createTimer(t)},n.handleEditFormSubmit=function(t){n.updateTimer(t)},n.createTimer=function(t){var e=n.newTimer(t);n.setState({timers:n.state.timers.concat(e)}),n.createTimerData(e)},n.createTimerData=function(t){return fetch("/api/timers",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(n.checkStatus)},n.updateTimer=function(t){n.setState({timers:n.state.timers.map(function(e){return e.id===t.id?Object.assign({},e,{title:t.title,project:t.project}):e})}),n.updateTimerData(t)},n.updateTimerData=function(t){return fetch("/api/timers",{method:"put",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(n.checkStatus)},n.handleTrashClick=function(t){n.deleteTimer(t)},n.handleStartClick=function(t){n.startTimer(t)},n.handleStopClick=function(t){n.stopTimer(t)},n.deleteTimer=function(t){n.setState({timers:n.state.timers.filter(function(e){return e.id!==t})}),n.deleteTimerData({id:t})},n.deleteTimerData=function(t){return fetch("/api/timers",{method:"delete",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(n.checkStatus)},n.startTimer=function(t){var e=Date.now();n.setState({timers:n.state.timers.map(function(n){return n.id===t?Object.assign({},n,{runningSince:e}):n})}),n.startTimerData({id:t,start:e})},n.startTimerData=function(t){return fetch("/api/timers/start",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(n.checkStatus)},n.stopTimer=function(t){var e=Date.now();n.setState({timers:n.state.timers.map(function(n){if(n.id===t){var a=e-n.runningSince;return Object.assign({},n,{elapsed:n.elapsed+a,runningSince:null})}return n})}),n.stopTimerData({id:t,stop:e})},n.stopTimerData=function(t){return fetch("/api/timers/stop",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(n.checkStatus)},n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.loadTimersFromServer(),setInterval(this.loadTimersFromServer,5e3)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ui three column centered grid"},i.a.createElement("div",{className:"column"},i.a.createElement(C,{timers:this.state.timers,onFormSubmit:this.handleEditFormSubmit,onTrashClick:this.handleTrashClick,onStartClick:this.handleStartClick,onStopClick:this.handleStopClick}),i.a.createElement(v,{onFormSubmit:this.handleCreateFormSubmit})))}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(c.a,null,i.a.createElement("div",null,i.a.createElement(s.a,{exact:!0,path:"/",component:k}),i.a.createElement(s.a,{exact:!0,path:"/timer",component:S}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[14,2,1]]]);
//# sourceMappingURL=main.2f2986cb.chunk.js.map